<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    
    <title>Mentify - Dashboard</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Montserrat:300,400,500,600,700"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />
  </head>

  <body>
    <!-- ======= Header ======= -->
    <header
      id="header"
      class="fixed-top d-flex align-items-center header-transparent"
    >
      <div class="container d-flex align-items-center">
        <h1 class="logo me-auto"><a href="landing.html">Mentify</a></h1>
        <nav id="navbar" class="navbar order-last order-lg-0">
          <ul>
            <li>
              <a class="nav-link scrollto" href="dashboard_mentee.html">Home</a>
            </li>
            <li>
              <a class="nav-link scrollto" href="dashboard_mentee.html"
                >Programs</a
              >
            </li>
            <li><a href="profile_mentee.html">Profile</a></li>
            <li><a href="my_courses_mentee.html">My Courses</a></li>
            <li><a href="">Logout</a></li>
          </ul>
          <i class="bi bi-list mobile-nav-toggle"></i>
        </nav>
      </div>
    </header>
    <!-- End Header -->

    <main>
      <section style="margin-top: 10%">
        <div class="container" data-aos="fade-up">
          <header
            style="text-align: center; background-color: rgb(190, 238, 255)"
          >
            <h2>Course Name</h2>
          </header>

          <div>Start Date:</div>
          <div>End Date:</div>

          <br />

          <div class="container" style="text-align: center">
            Enter Description here
          </div>

          <br />

          <div style="text-align: center; font-style: italic">
            Status: Enrolled
          </div>

          <br />

          <div
            style="text-align: center; color: rgb(2, 62, 95); font-size: small"
          >
            <b
              >Kindly provide us
              <u
                ><a href="feedback_form.html" style="color: #59a7d7"
                  >feedback here</a
                ></u
              >, so we can improve our services and let the mentor know how you
              found the program.</b
            >
          </div>
        </div>
      </section>

      <br />

      <section>
        <div class="container">
          <h3
            style="text-align: center; background-color: #96bbfa; padding: 5px"
          >
            Messages for {{ course_name }}
          </h3>

          <ul id="messages" style="text-align: center">
            {% for message in messages %}
            <li>{{ message.sender }}: {{ message.content }}</li>
            {% endfor %}
          </ul>
          <div
            class="d-flex justify-content-center align-items-center mb-3 text"
          >
          
          <form id="messageForm"action="/send_message" method="POST">
            <div class="col-md-6" style="background-color: rgb(252, 252, 252); text-align: center">
                <div class="row mt-2">
                  
                  <input   type="hidden" id="sender" name="sender" value="{{username}}" />
                    <input style="margin-top: 2%" type="text" id="content" name="content" placeholder="Add Message" required />
                    <input type="hidden" name="course_name" value="{{ course_name }}">
                    
                </div>
                <button class="btn btn-primary btn-sm btn-block" type="submit" style="background: #96bbfa; color: black; margin-top: 2%">Send</button>
            </div>
        </form>

        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.js"></script>
        <!-- Your JavaScript code -->
        <script>
          document.addEventListener('DOMContentLoaded', function () {
              var socket = io(); // Connect to the default namespace
      
              socket.on('connect', function () {
                  console.log('Connected to server');
              });
      
              socket.on('new_message', function (data) {
                  var messageList = document.getElementById('messages'); // Corrected ID
                  var listItem = document.createElement('li');
                  listItem.textContent = `${data.sender}: ${data.content}`;
                  messageList.appendChild(listItem);
              });
      
              document.getElementById('messageForm').addEventListener('submit', function (event) {
                  event.preventDefault();
                  var sender = document.getElementById('sender').value;
                  var content = document.getElementById('content').value;
                  var course_name = document.querySelector('input[name="course_name"]').value; // Use querySelector to get the value of hidden input
      
                  socket.emit('new_message', { sender: sender, content: content, course_name: course_name });
      
                  // Clear input fields after sending message
                  document.getElementById('content').value = '';
              });
          });
      </script>
            </div>
          </div>
        </div>
      </section>

      <footer id="footer" class="section-bg" style="margin-top: 5%">
        <div class="container" style="text-align: center">
          <div>
            Have an issue? Raise it
            <u><a href="raise_ticket.html" style="color: #59a7d7">Here</a></u>
          </div>
        </div>
      </footer>
    </main>

    <a
      href="#"
      class="back-to-top d-flex align-items-center justify-content-center"
      ><i class="bi bi-arrow-up-short"></i
    ></a>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
  </body>
</html>
